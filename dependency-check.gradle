allprojects {
    apply plugin: 'org.owasp.dependencycheck'
    dependencyCheck {
        skipConfigurations += 'lintClassPath'
        skipProjects = [':test']
        // set the Common Vulnerability Scoring System value
        // https://nvd.nist.gov/vuln-metrics/cvss
        failBuildOnCVSS = System.getenv("DEPENDENCY_CHECK_FAILBUID_CVSS") as Integer
        suppressionFile = 'dependency_check_suppressions.xml'
        outputDirectory = 'build/reports/dependency-check'
        formats = ['JSON', 'HTML']
        showSummary true
    }
}

subprojects { subproject ->
    // skip dependencyCheck scan for sample app
    if( ['test'].contains(subproject.name)) {
        dependencyCheck {
            skip true
        }
    }
}